{% extends "base.html" %}

{% block menu %}
                                <li class="active"><a href="{% url 'upload' %}">Upload</a></li>
                                <li><a href="{% url 'samples' %}">Samples</a></li>
                                <li><a href="{% url 'gallery' %}">Gallery</a></li>
{% endblock %}

{% block content %}
                <div class="col-sm-2">
                </div>
                <div class="col-sm-8">

			<form action="{% url 'upload' %}" method="post" enctype="multipart/form-data">
    				{% csrf_token %}
				<div class="panel panel-danger">
                            	    <div class="panel-heading"><strong>Submit</strong></div>
                            	    <div class="panel-body"><fieldset>
					<div class="input-group form-group">
						<span class="input-group-btn">
							<span class="btn btn-default" onclick="$(this).parent().find('input[type=file]').click();"><i class="glyphicon glyphicon-folder-open"></i></span>
							<input type="file" name="sample" id="sample" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());" style="display: none;" required>
						</span>
						<span class="form-control"></span>
					</div>
					<button class="btn btn-danger pull-right" type="submit">Upload</button>
				    </div>
				</div>
			</form>
			{% if sha256 %}
				<!--
				<br>
				<div class="alert alert-info alert-dismissible" role="alert">
					<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					Details available at: <a href="{% url 'detail' sha256 %}">{{ sha256 }}</a>
				</div>
				-->
				<script type="text/javascript">
					$(window).load(function(){
						$('#uploadModal').modal('show');
					});
				</script>
				<div id="uploadModal" class="modal fade" role="dialog">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">&times;</button>
								<h4 class="modal-title">File uploaded</h4>
							</div>
							<div class="modal-body">
								<p>Details available at: <a href="{% url 'detail' sha256 %}">{{ sha256 }}</a></p>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
							</div>
						</div>

					</div>
				</div>
			{% endif %}

                </div>
                <div class="col-sm-2">
                </div>

{% endblock %}

{% block content2 %}
                <div class="col-sm-12">

                     <fieldset>
                     <legend>Recent</legend>

	             {% include "table.html" %}

                     </fieldset>

                </div>
{% endblock %}
